<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Clima Actual</title>
</head>
<body>
    <h1>üå¶Ô∏è Clima en tu ubicaci√≥n</h1>
    <p id="weather">Obteniendo ubicaci√≥n...</p>

    <script>
        if ("geolocation" in navigator) {
            navigator.geolocation.getCurrentPosition(function(position) {
                const lat = position.coords.latitude;
                const lon = position.coords.longitude;

                fetch(`/get_weather?lat=${lat}&lon=${lon}`)
                    .then(response => response.text())
                    .then(data => {
                        document.getElementById("weather").textContent = data;
                        console.log("üå¶Ô∏è Clima recibido:", data); // Mostrar en consola
                    })
                    .catch(error => {
                        console.error("‚ùå Error al obtener el clima:", error);
                        document.getElementById("weather").textContent = "Error al obtener el clima.";
                    });

            }, function(error) {
                console.error("‚ö†Ô∏è Error de geolocalizaci√≥n:", error);
                document.getElementById("weather").textContent = "No se pudo acceder a tu ubicaci√≥n.";
            });
        } else {
            document.getElementById("weather").textContent = "Tu navegador no soporta geolocalizaci√≥n.";
        }
    </script>
</body>
</html>
